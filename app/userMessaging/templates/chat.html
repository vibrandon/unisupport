{% extends "base.html" %}

{% block content %}
<div class="container my-5">
    <h1 class="mb-4">ðŸ’¬ Chat Support</h1>

    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <h5 class="card-title">AI Chatbot (24/7)</h5>
            <p class="card-text">Instant, confidential help whenever you need it.</p>
            <div class="border rounded p-3 mb-3 bg-light" style="height: 300px; overflow-y: auto;">
                <!-- Placeholder for chat history -->
                <p class="text-muted text-center">Chatbot conversation will appear here.</p>
            </div>
            <form class="d-flex">
                <input type="text" class="form-control me-2" placeholder="Type your message..." disabled>
                <button class="btn btn-primary" type="submit" disabled>Send</button>
            </form>
            <p class="text-muted small mt-2">Chat features coming soon.</p>
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-body">
            <h5 class="card-title">Peer Support Chatrooms</h5>
            <p class="card-text">Connect with other students anonymously in moderated support spaces.</p>
            <p class="text-muted small">Note: Coming soon in next version.</p>
        </div>
</div>
    <div class="card shadow-sm mt-4">
  <div class="card-body">
    <h5 class="card-title">ðŸ‘¥ Start a 1-on-1 Chat</h5>
    <p class="text-muted">Choose a user to start messaging with:</p>

    {% if users %}
      <ul class="list-group">
        {% for user in users %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong>{{ user.firstname }} {{ user.lastname }}</strong>
            <br><small class="text-muted">{{ user.email }}</small>
          </div>
            <a href="{{ url_for('chat_bp.chat_with_user', user_id=user.id) }}" class="btn btn-outline-primary btn-sm">
              <i class="bi bi-chat-dots"></i> Chat
            </a>
        </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-muted">No available users to chat with right now.</p>
    {% endif %}
  </div>
</div>

{% endblock %}
